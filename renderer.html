

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Renderer objects &mdash; Nagare 0.4.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Nagare 0.4.1 documentation" href="index.html"/>
        <link rel="next" title="Significative “RESTful” URLs" href="restful.html"/>
        <link rel="prev" title="Callbacks and forms" href="callbacks_forms.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="description.html">Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Using it</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework_upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="nagare-admin.html">nagare-admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_file.html">Application configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="publisher_file.html">Publisher configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Application deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="third_party.html">Third party applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial1.html">Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial2.html">Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial3.html">Part 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial4.html">Part 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="wiki_tutorial.html">Wiki</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="application_creation.html">Application creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="presentation.html">Presentation service</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components model</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks_forms.html">Callbacks and forms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Renderers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-renderer">Creating a renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-renderers">Default renderers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xhtml-renderer">XHTML renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#head-renderer">Head renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xhtml5-renderer">XHTML5 renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xml-renderer">XML renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xsl-renderer">XSL renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#esi-renderer">ESI renderer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#namespaces-and-renderers-mixin">Namespaces and renderers mixin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="restful.html">Significative URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="wsgiapp.html">WSGI Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="i18n.html">Internationalization and localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Log service</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_references.html">Object references</a></li>
<li class="toctree-l1"><a class="reference internal" href="entry_points.html">Entry points</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo_installation.html">Demo installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_upgrade.html">Demo upgrade</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nagare</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The Renderer objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-renderer-objects">
<h1>The Renderer objects<a class="headerlink" href="#the-renderer-objects" title="Permalink to this headline">¶</a></h1>
<div class="section" id="creating-a-renderer">
<h2>Creating a renderer<a class="headerlink" href="#creating-a-renderer" title="Permalink to this headline">¶</a></h2>
<p>As described in <a class="reference internal" href="components.html"><span class="doc">The Nagare component model</span></a>, the views of a component receives
a renderer. A renderer is a DOM objects factory that the developer uses to
build the DOM tree of the <a class="reference internal" href="presentation.html"><span class="doc">view</span></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">presentation</span>

<span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># the `h` parameter is the renderer, used to generate a DOM tree</span>
    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>By default, each view receives a new XHTML renderer
(instance of <a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xhtml.Renderer" title="nagare.namespaces.xhtml.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xhtml.Renderer</span></code></a>) suitable to build a
synchronous (X)HTML DOM tree.</p>
<p>A single view can also use a different renderer, for example to generate
another XML dialect than XHTML:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">presentation</span>
<span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xml</span>

<span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">h</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">=</span> <span class="s1">&#39;text/xml&#39;</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">Renderer</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>    <span class="c1"># Creating a XML renderer</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">contact</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;John Doe&#39;</span><span class="p">),</span> <span class="n">x</span><span class="o">.</span><span class="n">age</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
</pre></div>
</div>
<p>or to generate an asynchronous view of a component:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">presentation</span><span class="p">,</span> <span class="n">component</span>
<span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xhtml</span>
<span class="kn">from</span> <span class="nn">MyBlog</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">Component</span><span class="p">(</span><span class="n">Blog</span><span class="p">())</span>

<span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># Creating an asynchronous XHTML renderer</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">AsyncRenderer</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The new renderer must be created with the current renderer as first parameter,
to maintain a parent/child relationship between them.</p>
</div>
<p>Now, if all your views need to generate XML (or use any other renderer), it would be
cumbersome to create a renderer in each view. Instead, you can tell Nagare to use
another default renderer by setting the <code class="docutils literal"><span class="pre">renderer_factory</span></code> attribute of the
<a class="reference internal" href="wsgiapp.html"><span class="doc">WSGIApp</span></a>, as shown in the example below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">wsgi</span>
<span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xml</span>

<span class="k">class</span> <span class="nc">WSGIApp</span><span class="p">(</span><span class="n">wsgi</span><span class="o">.</span><span class="n">WSGIApp</span><span class="p">):</span>
    <span class="c1"># use the XML renderer by default</span>
    <span class="n">renderer_factory</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">Renderer</span>
</pre></div>
</div>
<p>Then, all the views will receive an instance of <code class="docutils literal"><span class="pre">xml.Renderer</span></code> as renderer. Note that
you can still create another renderer in the view as explained above.</p>
</div>
<div class="section" id="default-renderers">
<h2>Default renderers<a class="headerlink" href="#default-renderers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="xhtml-renderer">
<h3>XHTML renderer<a class="headerlink" href="#xhtml-renderer" title="Permalink to this headline">¶</a></h3>
<p>A XHTML renderer is an instance of <a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xhtml.Renderer" title="nagare.namespaces.xhtml.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xhtml.Renderer</span></code></a>.</p>
<p>A XHTML renderer is a factory for all the possible XHTML tags. It also has:</p>
<ul class="simple">
<li>a <code class="docutils literal"><span class="pre">request</span></code> and a <code class="docutils literal"><span class="pre">response</span></code> attributes which are WebOb
<a class="reference external" href="https://webob.readthedocs.io/en/stable/reference.html#request">request</a>
and
<a class="reference external" href="https://webob.readthedocs.io/en/stable/reference.html#response">response</a>
objects.</li>
<li>a <code class="docutils literal"><span class="pre">head</span></code> attribute which is a Head renderer instance, see below.</li>
<li>the following methods:<ul>
<li><code class="docutils literal"><span class="pre">parse_html(self,</span> <span class="pre">source,</span> <span class="pre">fragment=False,</span> <span class="pre">no_leading_text=False,</span> <span class="pre">xhtml=False)</span></code> –
to read HTML or XHTML (chosen with the <code class="docutils literal"><span class="pre">xhtml</span></code> parameter) from the
<code class="docutils literal"><span class="pre">source</span></code> file to a DOM tree. If <code class="docutils literal"><span class="pre">fragment</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the (X)HTML
read can have multiple roots and the result will always be a list of DOM
trees. Also, if <code class="docutils literal"><span class="pre">fragment</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, if <code class="docutils literal"><span class="pre">no_leading_text</span></code> is
<code class="docutils literal"><span class="pre">True</span></code> and the (X)HTML begins by a text instead of a node, this text
is removed.</li>
<li><code class="docutils literal"><span class="pre">parse_htmlstring(self,</span> <span class="pre">text,</span> <span class="pre">fragment=False,</span> <span class="pre">no_leading_text=False,</span> <span class="pre">xhtml=False)</span></code> –
as <code class="docutils literal"><span class="pre">parse_html()</span></code> but the (X)HTML is read from the <code class="docutils literal"><span class="pre">text</span></code> string.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="head-renderer">
<h3>Head renderer<a class="headerlink" href="#head-renderer" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">head</span></code> attribute of a XHTML renderer is a Head renderer, an instance
of <a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xhtml.HeadRenderer" title="nagare.namespaces.xhtml.HeadRenderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xhtml.HeadRenderer</span></code></a>.</p>
<p>A head renderer is a factory for all the XHTML tags that can be embedded into
the <code class="docutils literal"><span class="pre">&lt;head&gt;</span></code> section: <code class="docutils literal"><span class="pre">base</span></code>, <code class="docutils literal"><span class="pre">head</span></code>, <code class="docutils literal"><span class="pre">link</span></code>, <code class="docutils literal"><span class="pre">meta</span></code>, <code class="docutils literal"><span class="pre">title</span></code>,
<code class="docutils literal"><span class="pre">style</span></code> and <code class="docutils literal"><span class="pre">script</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">presentation</span>

<span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># h.head is a Head renderer</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span> <span class="o">&lt;&lt;</span> <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;My Application&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world !&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>A head renderer has also the following method:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">css(self,</span> <span class="pre">name,</span> <span class="pre">style)</span></code> – add a css style definition. The style must
be named so that, if added by several views, it will be included only
once in the generated page.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;main_content&#39;</span><span class="p">,</span> <span class="s1">&#39;.main { border: 1px red solid }&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">),</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">css_url(self,</span> <span class="pre">url)</span></code> – add a css url. If the url is relative, it’s
relative to the <code class="docutils literal"><span class="pre">static</span></code> directory of the <a class="reference internal" href="configuration_file.html"><span class="doc">application</span></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">css_url</span><span class="p">(</span><span class="s1">&#39;http://www.nagare.org/site.css&#39;</span><span class="p">)</span> <span class="c1"># Absolute URL</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">css_url</span><span class="p">(</span><span class="s1">&#39;css/my_application.css&#39;</span><span class="p">)</span>         <span class="c1"># Relative URL</span>

    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">),</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">javascript(self,</span> <span class="pre">name,</span> <span class="pre">script)</span></code> – add a javascript definition.
The javascript code must be named so that, if added by several views, it
will be included only once in the generated page.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">javascript</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="s1">&#39;function debug(msg) { alert(msg) }&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">),</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">javascript_url(self,</span> <span class="pre">url)</span></code> – add a javascript url. If the url is
relative, it’s relative to the <code class="docutils literal"><span class="pre">static</span></code> directory of the
<a class="reference internal" href="configuration_file.html"><span class="doc">application</span></a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@presentation.render_for</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">javascript_url</span><span class="p">(</span><span class="s1">&#39;http://www.nagare.org/anim.js&#39;</span><span class="p">)</span> <span class="c1"># Absolute URL</span>
    <span class="n">h</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">javascript_url</span><span class="p">(</span><span class="s1">&#39;js/debug.js&#39;</span><span class="p">)</span>                   <span class="c1"># Relative URL</span>

    <span class="k">return</span> <span class="n">h</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">),</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>After the rendering phase, Nagare generates a <code class="docutils literal"><span class="pre">&lt;head&gt;</span></code> section which is the
concatenation of all the DOM objects the different views have put into the
Head renderer.</p>
</div>
<div class="section" id="xhtml5-renderer">
<h3>XHTML5 renderer<a class="headerlink" href="#xhtml5-renderer" title="Permalink to this headline">¶</a></h3>
<p>A XHTML5 renderer is an instance of <a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xhtml5.Renderer" title="nagare.namespaces.xhtml5.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xhtml5.Renderer</span></code></a>.</p>
<p>A XHTML5 renderer is a factory for all the possible HTML5 or XHTML5 tags from
the <a class="reference external" href="http://www.w3.org/TR/html5/">HTML5 specification</a>.</p>
<p>Since it’s extremely likely that you want to use this renderer in all the views
of your application instead of the default (X)HTML renderer, you can install it
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nagare</span> <span class="kn">import</span> <span class="n">wsgi</span>
<span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xhtml5</span>

<span class="k">class</span> <span class="nc">WSGIApp</span><span class="p">(</span><span class="n">wsgi</span><span class="o">.</span><span class="n">WSGIApp</span><span class="p">):</span>
    <span class="c1"># use the (X)HTML5 renderer by default</span>
    <span class="n">renderer_factory</span> <span class="o">=</span> <span class="n">xhtml5</span><span class="o">.</span><span class="n">Renderer</span>
</pre></div>
</div>
<p>Then, all the views will receive a (X)HTML5 renderer by default.</p>
<p>This renderer is like an XHTML renderer except that the set of available tags and
attributes is a little different. For example, HTML5 offers <code class="docutils literal"><span class="pre">&lt;audio&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;video&gt;</span></code>
and <code class="docutils literal"><span class="pre">&lt;canvas&gt;</span></code> tags and more structural markup such as <code class="docutils literal"><span class="pre">&lt;section&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;article&gt;</span></code>,
<code class="docutils literal"><span class="pre">&lt;aside&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;nav&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;figure&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;header&gt;</span></code> and <code class="docutils literal"><span class="pre">&lt;footer&gt;</span></code> tags.</p>
</div>
<div class="section" id="xml-renderer">
<h3>XML renderer<a class="headerlink" href="#xml-renderer" title="Permalink to this headline">¶</a></h3>
<p>A XML renderer is an instance of <a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xml.Renderer" title="nagare.namespaces.xml.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xml.Renderer</span></code></a>.</p>
<p>It’s a simple renderer which accepts any tag creation:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xml</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">Renderer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">contact</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;John Doe&#39;</span><span class="p">),</span> <span class="n">x</span><span class="o">.</span><span class="n">age</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">write_xmlstring</span><span class="p">()</span>
<span class="go">&#39;&lt;contact&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;age&gt;20&lt;/age&gt;&lt;/contact&gt;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="xsl-renderer">
<h3>XSL renderer<a class="headerlink" href="#xsl-renderer" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="http://www.w3.org/TR/xslt">XSL</a> renderer is an instance of
<a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.xsl.Renderer" title="nagare.namespaces.xsl.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.xsl.Renderer</span></code></a> and has a factory for
all the possible XSL tags.</p>
</div>
<div class="section" id="esi-renderer">
<h3>ESI renderer<a class="headerlink" href="#esi-renderer" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="http://www.w3.org/TR/esi-lang">ESI</a> renderer is an instance of
<a class="reference internal" href="source/nagare.namespaces.html#nagare.namespaces.esi.Renderer" title="nagare.namespaces.esi.Renderer"><code class="xref py py-class docutils literal"><span class="pre">nagare.namespaces.esi.Renderer</span></code></a> and has
a factory for all the possible ESI tags :  <code class="docutils literal"><span class="pre">attempt</span></code>, <code class="docutils literal"><span class="pre">choose</span></code>, <code class="docutils literal"><span class="pre">comment</span></code>,
<code class="docutils literal"><span class="pre">include</span></code>, <code class="docutils literal"><span class="pre">inline</span></code>, <code class="docutils literal"><span class="pre">otherwise</span></code>, <code class="docutils literal"><span class="pre">remove</span></code>, <code class="docutils literal"><span class="pre">try</span></code>, <code class="docutils literal"><span class="pre">vars</span></code>, <code class="docutils literal"><span class="pre">when</span></code>.</p>
</div>
</div>
<div class="section" id="namespaces-and-renderers-mixin">
<h2>Namespaces and renderers mixin<a class="headerlink" href="#namespaces-and-renderers-mixin" title="Permalink to this headline">¶</a></h2>
<p>A renderer can create DOM object in a specific
<a class="reference external" href="http://www.w3.org/TR/REC-xml-names/">XML namespace</a>. First the
namespace(s) must be declared to the renderer by setting its <code class="docutils literal"><span class="pre">namespaces</span></code>
attribute to a <em>namespace prefix</em> -&gt; <em>namespace uri</em> dictionary. Then, at any
moment, the namespace to use is choosen by setting its <code class="docutils literal"><span class="pre">default_namespace</span></code>
atttribut to the prefix of the namespace:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xsl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="n">Renderer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">namespaces</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;xsl&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.w3.org/1999/XSL/Transform&#39;</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">default_namespace</span> <span class="o">=</span> <span class="s1">&#39;xsl&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">xsl</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">stylesheet</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">x</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">x</span><span class="o">.</span><span class="n">template</span><span class="p">(</span>
<span class="gp">... </span>              <span class="n">x</span><span class="o">.</span><span class="n">copy_of</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">),</span>
<span class="gp">... </span>              <span class="n">match</span><span class="o">=</span><span class="s1">&#39;/&#39;</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">... </span>      <span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">xsl</span><span class="o">.</span><span class="n">write_xmlstring</span><span class="p">(</span><span class="n">pretty_print</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;</span>
<span class="go">  &lt;xsl:output encoding=&quot;utf-8&quot;/&gt;</span>
<span class="go">  &lt;xsl:template match=&quot;/&quot;&gt;</span>
<span class="go">    &lt;xsl:copy-of select=&quot;.&quot;/&gt;</span>
<span class="go">  &lt;/xsl:template&gt;</span>
<span class="go">&lt;/xsl:stylesheet&gt;</span>
</pre></div>
</div>
<p>Different renderers, with different namespaces, can be combined to build
a DOM tree:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nagare.namespaces</span> <span class="kn">import</span> <span class="n">xhtml</span><span class="p">,</span> <span class="n">esi</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">xhtml</span><span class="o">.</span><span class="n">Renderer</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">esi</span><span class="o">.</span><span class="n">Renderer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">namespaces</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;esi&#39;</span><span class="p">:</span> <span class="n">esi</span><span class="o">.</span><span class="n">NS</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">default_namespace</span> <span class="o">=</span> <span class="s1">&#39;esi&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">html</span><span class="p">(</span>
<span class="gp">... </span>           <span class="n">h</span><span class="o">.</span><span class="n">body</span><span class="p">(</span>
<span class="gp">... </span>               <span class="n">h</span><span class="o">.</span><span class="n">h1</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">),</span>
<span class="gp">... </span>               <span class="n">s</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s1">&#39;http://www.nagare.org&#39;</span><span class="p">),</span>
<span class="gp">... </span>               <span class="n">h</span><span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
<span class="gp">... </span>           <span class="p">)</span>
<span class="gp">... </span>       <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">tree</span><span class="o">.</span><span class="n">write_xmlstring</span><span class="p">(</span><span class="n">pretty_print</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;html&gt;</span>
<span class="go">  &lt;body&gt;</span>
<span class="go">    &lt;h1&gt;Hello&lt;/h1&gt;</span>
<span class="go">    &lt;esi:include xmlns:esi=&quot;http://www.edge-delivery.org/esi/1.0&quot; src=&quot;http://www.nagare.org&quot;/&gt;</span>
<span class="go">    &lt;p&gt;world&lt;/p&gt;</span>
<span class="go">  &lt;/body&gt;</span>
<span class="go">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="restful.html" class="btn btn-neutral float-right" title="Significative “RESTful” URLs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="callbacks_forms.html" class="btn btn-neutral" title="Callbacks and forms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
   

</body>
</html>