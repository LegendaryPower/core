

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nagare.sessions package &mdash; Nagare 0.5.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Nagare 0.5.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../description.html">Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Using it</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../framework_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../framework_upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nagare-admin.html">nagare-admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_file.html">Application configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publisher_file.html">Publisher configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Application deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../third_party.html">Third party applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial1.html">Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial2.html">Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial3.html">Part 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial4.html">Part 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wiki_tutorial.html">Wiki</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../application_creation.html">Application creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation.html">Presentation service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components.html">Components model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../callbacks_forms.html">Callbacks and forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../renderer.html">Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restful.html">Significative URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wsgiapp.html">WSGI Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i18n.html">Internationalization and localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log.html">Log service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object_references.html">Object references</a></li>
<li class="toctree-l1"><a class="reference internal" href="../entry_points.html">Entry points</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demo_installation.html">Demo installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_upgrade.html">Demo upgrade</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nagare</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>nagare.sessions package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nagare-sessions-package">
<h1>nagare.sessions package<a class="headerlink" href="#nagare-sessions-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-nagare.sessions.common">
<span id="nagare-sessions-common-module"></span><h2>nagare.sessions.common module<a class="headerlink" href="#module-nagare.sessions.common" title="Permalink to this headline">¶</a></h2>
<p>Base classes for the sessions management</p>
<dl class="class">
<dt id="nagare.sessions.common.Sessions">
<em class="property">class </em><code class="descclassname">nagare.sessions.common.</code><code class="descname">Sessions</code><span class="sig-paren">(</span><em>states_history=True</em>, <em>security_cookie_httponly=True</em>, <em>security_cookie_name='_nagare'</em>, <em>security_cookie_secure=False</em>, <em>serializer=&lt;class 'nagare.sessions.serializer.Dummy'&gt;</em>, <em>pickler=None</em>, <em>unpickler=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The sessions managers</p>
<dl class="method">
<dt id="nagare.sessions.common.Sessions.check_session_id">
<code class="descname">check_session_id</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.check_session_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a session exist</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of a session</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>is <code class="docutils literal"><span class="pre">session_id</span></code> the id of an existing session?</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>session_id</em>, <em>secure_id</em>, <em>lock</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">lock</span></code> – the lock of the session</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.create_lock">
<code class="descname">create_lock</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.create_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new lock for a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the lock</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session to delete</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.fetch_state">
<code class="descname">fetch_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.fetch_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a state with its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>id of the more recent stored state</li>
<li>secure number associated to the session</li>
<li>data kept into the session</li>
<li>data kept into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.get_lock">
<code class="descname">get_lock</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.get_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the lock of a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the lock</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.get_root">
<code class="descname">get_root</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the objects graph of a state</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>id of the latest state</li>
<li>secure number associated to the session</li>
<li>objects graph</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.get_state">
<code class="descname">get_state</code><span class="sig-paren">(</span><em>request</em>, <em>response</em>, <em>use_same_state</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new state or return an existing one</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">request</span></code> – the web request object</li>
<li><code class="docutils literal"><span class="pre">response</span></code> – the web response object</li>
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is a copy of the state to created?</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.sessionid_in_form">
<code class="descname">sessionid_in_form</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>h</em>, <em>request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.sessionid_in_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the DOM tree to merge into a form to add the session and state
hidden ids</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">h</span></code> – the current renderer</li>
<li><code class="docutils literal"><span class="pre">request</span></code> – the web request object</li>
<li><code class="docutils literal"><span class="pre">response</span></code> – the web response object</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>a DOM tree</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.sessionid_in_url">
<code class="descname">sessionid_in_url</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.sessionid_in_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the session and states ids to put into an URL</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">request</span></code> – the web request</li>
<li><code class="docutils literal"><span class="pre">response</span></code> – the web response</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>session id parameter</li>
<li>state id parameter (optional, only if <code class="docutils literal"><span class="pre">states_history</span></code> is <code class="docutils literal"><span class="pre">True</span></code>)</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.set_config">
<code class="descname">set_config</code><span class="sig-paren">(</span><em>filename</em>, <em>conf</em>, <em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.set_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the configuration parameters</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">filename</span></code> – the path to the configuration file</li>
<li><code class="docutils literal"><span class="pre">conf</span></code> – the <code class="docutils literal"><span class="pre">ConfigObj</span></code> object, created from the configuration file</li>
<li><code class="docutils literal"><span class="pre">error</span></code> – the function to call in case of configuration errors</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.set_root">
<code class="descname">set_root</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>secure_id</em>, <em>use_same_state</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.set_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the state</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is a copy of this state to be created?</li>
<li><code class="docutils literal"><span class="pre">data</span></code> – the objects graph</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="nagare.sessions.common.Sessions.spec">
<code class="descname">spec</code><em class="property"> = {'pickler': 'string(default=&quot;cPickle:Pickler&quot;)', 'unpickler': 'string(default=&quot;cPickle:Unpickler&quot;)', 'states_history': 'boolean(default=True)', 'security_cookie_secure': 'boolean(default=False)', 'security_cookie_httponly': 'boolean(default=True)', 'security_cookie_name': 'string(default=&quot;_nagare&quot;)', 'serializer': 'string(default=&quot;nagare.sessions.serializer:Dummy&quot;)'}</em><a class="headerlink" href="#nagare.sessions.common.Sessions.spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.Sessions.store_state">
<code class="descname">store_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>secure_id</em>, <em>use_same_state</em>, <em>session_data</em>, <em>state_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.Sessions.store_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a state and its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is this state to be stored in the previous snapshot?</li>
<li><code class="docutils literal"><span class="pre">session_data</span></code> – data to keep into the session</li>
<li><code class="docutils literal"><span class="pre">state_data</span></code> – data to keep into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.common.State">
<em class="property">class </em><code class="descclassname">nagare.sessions.common.</code><code class="descname">State</code><span class="sig-paren">(</span><em>sessions_manager</em>, <em>session_id</em>, <em>state_id</em>, <em>secure_id</em>, <em>use_same_state</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A state (objects graph serialized / de-serialized by a sessions manager)</p>
<dl class="method">
<dt id="nagare.sessions.common.State.acquire">
<code class="descname">acquire</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Lock the state</p>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the session of this state</p>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.get_root">
<code class="descname">get_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the objects graph of this state</p>
<dl class="docutils">
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the objects graph (<code class="docutils literal"><span class="pre">None</span></code> if this state is new)</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.release">
<code class="descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the state</p>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.sessionid_in_form">
<code class="descname">sessionid_in_form</code><span class="sig-paren">(</span><em>h</em>, <em>request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.sessionid_in_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the DOM tree to merge into a form, to add the session and state hidden ids</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">h</span></code> – the current renderer</li>
<li><code class="docutils literal"><span class="pre">request</span></code> – the web request</li>
<li><code class="docutils literal"><span class="pre">response</span></code> – the web response</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the DOM tree</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.sessionid_in_url">
<code class="descname">sessionid_in_url</code><span class="sig-paren">(</span><em>request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.sessionid_in_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the session and states ids to put into an URL</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">request</span></code> – the web request</li>
<li><code class="docutils literal"><span class="pre">response</span></code> – the web response</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>session id parameter</li>
<li>state id parameter</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.common.State.set_root">
<code class="descname">set_root</code><span class="sig-paren">(</span><em>use_same_state</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.common.State.set_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the objects graph of this state</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is the objects graph to be stored in this state or in a new one?</li>
<li><code class="docutils literal"><span class="pre">data</span></code> – the objects graph</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nagare.sessions.lru_dict">
<span id="nagare-sessions-lru-dict-module"></span><h2>nagare.sessions.lru_dict module<a class="headerlink" href="#module-nagare.sessions.lru_dict" title="Permalink to this headline">¶</a></h2>
<p>A LRU dictionary is a dictionary with a fixed maximum number of keys.</p>
<p>When this maximum is reached, the last recently used key is deleted when a new
key is added.</p>
<dl class="class">
<dt id="nagare.sessions.lru_dict.LRUDict">
<em class="property">class </em><code class="descclassname">nagare.sessions.lru_dict.</code><code class="descname">LRUDict</code><span class="sig-paren">(</span><em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.lru_dict.LRUDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A LRU dictionary is a dictionary with a fixed maximum number of keys</p>
<dl class="method">
<dt id="nagare.sessions.lru_dict.LRUDict.debug">
<code class="descname">debug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.lru_dict.LRUDict.debug" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.lru_dict.ThreadSafeLRUDict">
<em class="property">class </em><code class="descclassname">nagare.sessions.lru_dict.</code><code class="descname">ThreadSafeLRUDict</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.lru_dict.ThreadSafeLRUDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nagare.sessions.lru_dict.LRUDict" title="nagare.sessions.lru_dict.LRUDict"><code class="xref py py-class docutils literal"><span class="pre">nagare.sessions.lru_dict.LRUDict</span></code></a></p>
<p>Tread safe version of a LRU dictionary</p>
</dd></dl>

</div>
<div class="section" id="module-nagare.sessions.memcached_sessions">
<span id="nagare-sessions-memcached-sessions-module"></span><h2>nagare.sessions.memcached_sessions module<a class="headerlink" href="#module-nagare.sessions.memcached_sessions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nagare.sessions.memcached_sessions.Lock">
<em class="property">class </em><code class="descclassname">nagare.sessions.memcached_sessions.</code><code class="descname">Lock</code><span class="sig-paren">(</span><em>connection</em>, <em>lock_id</em>, <em>ttl</em>, <em>poll_time</em>, <em>max_wait_time</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Lock.acquire">
<code class="descname">acquire</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Lock.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the lock</p>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Lock.release">
<code class="descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Lock.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the lock</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.memcached_sessions.Sessions">
<em class="property">class </em><code class="descclassname">nagare.sessions.memcached_sessions.</code><code class="descname">Sessions</code><span class="sig-paren">(</span><em>host='127.0.0.1'</em>, <em>port=11211</em>, <em>ttl=0</em>, <em>lock_ttl=0</em>, <em>lock_poll_time=0.1</em>, <em>lock_max_wait_time=5</em>, <em>min_compress_len=0</em>, <em>reset=False</em>, <em>debug=True</em>, <em>serializer=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nagare.sessions.common.Sessions" title="nagare.sessions.common.Sessions"><code class="xref py py-class docutils literal"><span class="pre">nagare.sessions.common.Sessions</span></code></a></p>
<p>Sessions manager for sessions kept in an external memcached server</p>
<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>session_id</em>, <em>secure_id</em>, <em>lock</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">lock</span></code> – the lock of the session</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session to delete</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.fetch_state">
<code class="descname">fetch_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.fetch_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a state with its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>id of the latest state</li>
<li>secure number associated to the session</li>
<li>data kept into the session</li>
<li>data kept into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.flush_all">
<code class="descname">flush_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.flush_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all the contents in the memcached server</p>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.get_lock">
<code class="descname">get_lock</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.get_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the lock of a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the lock</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.set_config">
<code class="descname">set_config</code><span class="sig-paren">(</span><em>filename</em>, <em>conf</em>, <em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.set_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the configuration parameters</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">filename</span></code> – the path to the configuration file</li>
<li><code class="docutils literal"><span class="pre">conf</span></code> – the <code class="docutils literal"><span class="pre">ConfigObj</span></code> object, created from the configuration file</li>
<li><code class="docutils literal"><span class="pre">error</span></code> – the function to call in case of configuration errors</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="nagare.sessions.memcached_sessions.Sessions.spec">
<code class="descname">spec</code><em class="property"> = {'lock_max_wait_time': 'float(default=5.)', 'min_compress_len': 'integer(default=0)', 'lock_ttl': 'float(default=0.)', 'host': 'string(default=&quot;127.0.0.1&quot;)', 'ttl': 'integer(default=0)', 'security_cookie_httponly': 'boolean(default=True)', 'pickler': 'string(default=&quot;cPickle:Pickler&quot;)', 'port': 'integer(default=11211)', 'reset': 'boolean(default=True)', 'unpickler': 'string(default=&quot;cPickle:Unpickler&quot;)', 'states_history': 'boolean(default=True)', 'lock_poll_time': 'float(default=0.1)', 'security_cookie_secure': 'boolean(default=False)', 'debug': 'boolean(default=False)', 'security_cookie_name': 'string(default=&quot;_nagare&quot;)', 'serializer': 'string(default=&quot;nagare.sessions.serializer:Pickle&quot;)'}</em><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nagare.sessions.memcached_sessions.Sessions.store_state">
<code class="descname">store_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>secure_id</em>, <em>use_same_state</em>, <em>session_data</em>, <em>state_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memcached_sessions.Sessions.store_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a state and its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is this state to be stored in the previous snapshot?</li>
<li><code class="docutils literal"><span class="pre">session_data</span></code> – data to keep into the session</li>
<li><code class="docutils literal"><span class="pre">state_data</span></code> – data to keep into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nagare.sessions.memory_sessions">
<span id="nagare-sessions-memory-sessions-module"></span><h2>nagare.sessions.memory_sessions module<a class="headerlink" href="#module-nagare.sessions.memory_sessions" title="Permalink to this headline">¶</a></h2>
<p>Sessions managed in memory</p>
<dl class="docutils">
<dt>These sessions managers keep:</dt>
<dd><ul class="first last simple">
<li>the last recently used <code class="docutils literal"><span class="pre">DEFAULT_NB_SESSIONS</span></code> sessions</li>
<li>for each session, the last recently used <code class="docutils literal"><span class="pre">DEFAULT_NB_STATES</span></code> states</li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="nagare.sessions.memory_sessions.Sessions">
<em class="property">class </em><code class="descclassname">nagare.sessions.memory_sessions.</code><code class="descname">Sessions</code><span class="sig-paren">(</span><em>nb_sessions=10000</em>, <em>nb_states=20</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nagare.sessions.common.Sessions" title="nagare.sessions.common.Sessions"><code class="xref py py-class docutils literal"><span class="pre">nagare.sessions.common.Sessions</span></code></a></p>
<p>Sessions manager for states kept in memory</p>
<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.check_session_id">
<code class="descname">check_session_id</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.check_session_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a session exist</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of a session</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>is <code class="docutils literal"><span class="pre">session_id</span></code> the id of an existing session?</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>session_id</em>, <em>secure_id</em>, <em>lock</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">lock</span></code> – the lock of the session</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.create_lock">
<code class="descname">create_lock</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.create_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new lock for a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the lock</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – id of the session to delete</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.fetch_state">
<code class="descname">fetch_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.fetch_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a state with its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>id of the latest state</li>
<li>secure number associated to the session</li>
<li>data kept into the session</li>
<li>data kept into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.get_lock">
<code class="descname">get_lock</code><span class="sig-paren">(</span><em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.get_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the lock of a session</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the lock</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.set_config">
<code class="descname">set_config</code><span class="sig-paren">(</span><em>filename</em>, <em>conf</em>, <em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.set_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the configuration parameters</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">filename</span></code> – path to the configuration file</li>
<li><code class="docutils literal"><span class="pre">conf</span></code> – <code class="docutils literal"><span class="pre">ConfigObj</span></code> object created from the configuration file</li>
<li><code class="docutils literal"><span class="pre">error</span></code> – function to call in case of configuration errors</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="nagare.sessions.memory_sessions.Sessions.spec">
<code class="descname">spec</code><em class="property"> = {'security_cookie_name': 'string(default=&quot;_nagare&quot;)', 'security_cookie_secure': 'boolean(default=False)', 'security_cookie_httponly': 'boolean(default=True)', 'unpickler': 'string(default=&quot;cPickle:Unpickler&quot;)', 'pickler': 'string(default=&quot;cPickle:Pickler&quot;)', 'nb_states': 'integer(default=20)', 'states_history': 'boolean(default=True)', 'serializer': 'string(default=&quot;nagare.sessions.serializer:Dummy&quot;)', 'nb_sessions': 'integer(default=10000)'}</em><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nagare.sessions.memory_sessions.Sessions.store_state">
<code class="descname">store_state</code><span class="sig-paren">(</span><em>session_id</em>, <em>state_id</em>, <em>secure_id</em>, <em>use_same_state</em>, <em>session_data</em>, <em>state_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.Sessions.store_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a state and its associated objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> – session id of this state</li>
<li><code class="docutils literal"><span class="pre">state_id</span></code> – id of this state</li>
<li><code class="docutils literal"><span class="pre">secure_id</span></code> – the secure number associated to the session</li>
<li><code class="docutils literal"><span class="pre">use_same_state</span></code> – is this state to be stored in the previous snapshot?</li>
<li><code class="docutils literal"><span class="pre">session_data</span></code> – data to keep into the session</li>
<li><code class="docutils literal"><span class="pre">state_data</span></code> – data to keep into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.memory_sessions.SessionsWithPickledStates">
<em class="property">class </em><code class="descclassname">nagare.sessions.memory_sessions.</code><code class="descname">SessionsWithPickledStates</code><span class="sig-paren">(</span><em>serializer=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.memory_sessions.SessionsWithPickledStates" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nagare.sessions.memory_sessions.Sessions" title="nagare.sessions.memory_sessions.Sessions"><code class="xref py py-class docutils literal"><span class="pre">nagare.sessions.memory_sessions.Sessions</span></code></a></p>
<p>Sessions manager for states pickled / unpickled in memory</p>
<dl class="attribute">
<dt id="nagare.sessions.memory_sessions.SessionsWithPickledStates.spec">
<code class="descname">spec</code><em class="property"> = {'pickler': 'string(default=&quot;cPickle:Pickler&quot;)', 'unpickler': 'string(default=&quot;cPickle:Unpickler&quot;)', 'states_history': 'boolean(default=True)', 'security_cookie_secure': 'boolean(default=False)', 'security_cookie_httponly': 'boolean(default=True)', 'security_cookie_name': 'string(default=&quot;_nagare&quot;)', 'nb_states': 'integer(default=20)', 'serializer': 'string(default=&quot;nagare.sessions.serializer:Pickle&quot;)', 'nb_sessions': 'integer(default=10000)'}</em><a class="headerlink" href="#nagare.sessions.memory_sessions.SessionsWithPickledStates.spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nagare.sessions.serializer">
<span id="nagare-sessions-serializer-module"></span><h2>nagare.sessions.serializer module<a class="headerlink" href="#module-nagare.sessions.serializer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nagare.sessions.serializer.Dummy">
<em class="property">class </em><code class="descclassname">nagare.sessions.serializer.</code><code class="descname">Dummy</code><span class="sig-paren">(</span><em>pickler=None</em>, <em>unpickler=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Dummy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="nagare.sessions.serializer.Dummy.dumps">
<code class="descname">dumps</code><span class="sig-paren">(</span><em>data</em>, <em>clean_callbacks</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Dummy.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize an objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">data</span></code> – the objects graph</li>
<li><code class="docutils literal"><span class="pre">clean_callbacks</span></code> – do we have to forget the old callbacks?</li>
</ul>
</dd>
<dt>Out:</dt>
<dd><ul class="first last simple">
<li>data kept into the session</li>
<li>data kept into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.serializer.Dummy.loads">
<code class="descname">loads</code><span class="sig-paren">(</span><em>session_data</em>, <em>state_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Dummy.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserialize an objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_data</span></code> – data from the session</li>
<li><code class="docutils literal"><span class="pre">state_data</span></code> – data from the state</li>
</ul>
</dd>
<dt>Out:</dt>
<dd><ul class="first last simple">
<li>the objects graph</li>
<li>the callbacks</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.serializer.DummyFile">
<em class="property">class </em><code class="descclassname">nagare.sessions.serializer.</code><code class="descname">DummyFile</code><a class="headerlink" href="#nagare.sessions.serializer.DummyFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A write-only file that does nothing</p>
<dl class="method">
<dt id="nagare.sessions.serializer.DummyFile.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.DummyFile.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="nagare.sessions.serializer.Pickle">
<em class="property">class </em><code class="descclassname">nagare.sessions.serializer.</code><code class="descname">Pickle</code><span class="sig-paren">(</span><em>pickler=None</em>, <em>unpickler=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nagare.sessions.serializer.Dummy" title="nagare.sessions.serializer.Dummy"><code class="xref py py-class docutils literal"><span class="pre">nagare.sessions.serializer.Dummy</span></code></a></p>
<dl class="method">
<dt id="nagare.sessions.serializer.Pickle.dumps">
<code class="descname">dumps</code><span class="sig-paren">(</span><em>data</em>, <em>clean_callbacks</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Pickle.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize an objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">data</span></code> – the objects graph</li>
<li><code class="docutils literal"><span class="pre">clean_callbacks</span></code> – do we have to forget the old callbacks?</li>
</ul>
</dd>
<dt>Out:</dt>
<dd><ul class="first last simple">
<li>data kept into the session</li>
<li>data kept into the state</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nagare.sessions.serializer.Pickle.loads">
<code class="descname">loads</code><span class="sig-paren">(</span><em>session_data</em>, <em>state_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.Pickle.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserialize an objects graph</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">session_data</span></code> – data from the session</li>
<li><code class="docutils literal"><span class="pre">state_data</span></code> – data from the state</li>
</ul>
</dd>
<dt>Out:</dt>
<dd><ul class="first last simple">
<li>the objects graph</li>
<li>the callbacks</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nagare.sessions.serializer.persistent_id">
<code class="descclassname">nagare.sessions.serializer.</code><code class="descname">persistent_id</code><span class="sig-paren">(</span><em>o</em>, <em>clean_callbacks</em>, <em>callbacks</em>, <em>session_data</em>, <em>tasklets</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.persistent_id" title="Permalink to this definition">¶</a></dt>
<dd><p>An object with a <code class="docutils literal"><span class="pre">_persistent_id</span></code> attribute is stored into the session
not into the state snapshot</p>
<dl class="docutils">
<dt>In:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">o</span></code> – object to check</li>
<li><code class="docutils literal"><span class="pre">clean_callbacks</span></code> – do we have to forget the old callbacks?</li>
</ul>
</dd>
<dt>Out:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">callbacks</span></code> – merge of the callbacks from all the components</li>
<li><code class="docutils literal"><span class="pre">session_data</span></code> – dict persistent_id -&gt; object of the objects to store into the session</li>
<li><code class="docutils literal"><span class="pre">tasklets</span></code> – set of the serialized tasklets</li>
</ul>
</dd>
<dt>Return:</dt>
<dd><ul class="first last simple">
<li>the persistent id or <code class="docutils literal"><span class="pre">None</span></code></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nagare.sessions.serializer.set_persistent_id">
<code class="descclassname">nagare.sessions.serializer.</code><code class="descname">set_persistent_id</code><span class="sig-paren">(</span><em>pickler</em>, <em>persistent_id</em><span class="sig-paren">)</span><a class="headerlink" href="#nagare.sessions.serializer.set_persistent_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-nagare.sessions">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-nagare.sessions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="nagare.sessions.ExpirationError">
<em class="property">exception </em><code class="descclassname">nagare.sessions.</code><code class="descname">ExpirationError</code><a class="headerlink" href="#nagare.sessions.ExpirationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.LookupError</span></code></p>
<p>Raised when a session or a state id is no longer valid</p>
</dd></dl>

<dl class="exception">
<dt id="nagare.sessions.SessionSecurityError">
<em class="property">exception </em><code class="descclassname">nagare.sessions.</code><code class="descname">SessionSecurityError</code><a class="headerlink" href="#nagare.sessions.SessionSecurityError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.LookupError</span></code></p>
<p>Raised when the secure id of a session is not valid</p>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
   

</body>
</html>